#!/usr/bin/env ruby

require 'rubygems'
require 'thor'

if %w(-v --version).include? ARGV.first
  require 'taza'
  puts "#{File.basename($0)} #{Taza::VERSION}"
  exit(0)
end


Dir[File.expand_path("../..", __FILE__) + "/generators/*/*.rb"].each do |generator|
  require generator
end

class Generate < Thor
  register(New, "new", "new NAME DRIVER BROWSER", "Generates a new taza project, and configures the driver.")
  register(Site, "site", "site NAME URL", "Generates a new site.")
  register(Page, "page", "page NAME SITE_NAME SECTION", "Generates a new page and associated spec. SITE_NAME must exist.")
  register(Partial, "partial", "partial NAME SITE_NAME", "Generates a partial page for the site.")
  register(Flow, "flow", "flow NAME SITE_NAME", "Generates a flow for the site.")
  register(IsolationSpec, "isolation", "functional NAME SITE_NAME SECTION", "Generates a functional spec.")
  register(IntegrationSpec, "integration", "integration NAME SITES", "Generates a integration spec.")
  register(Models, "model", "model NAME SITE TABLE_NAME", "Generates a table model")
end

Generate.start